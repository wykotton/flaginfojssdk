"use strict";(function(e,t){if(typeof module!=="undefined"&&module.exports){module.exports=t()}else if(typeof define==="function"&&define.amd){define(t)}else{e.fg=t.call(e)}})(window,function(){"use strict";function e(){var t="kot",n="1.0.9",o=false,i={chalk:"",theme:"default",origColor:"#409EFF"};var r=function t(){e.option=i;return e};var s=function t(n){for(var o=n.length-1;o>=0;o--){e["get"+n[o].substring(0,1).toUpperCase()+n[o].substring(1)]=function(t){return function(){var o=e[n[t]]||e.getQueryObject()[n[t]];if(!o)e.msg("获取"+n[t]+"失败,请嵌入企业门户并在fg.ready回调用使用该方法");return o}}(o)}};return{initFunction:function e(){r();s(["token","userInfo","appId","theme","color","businessType","spId"])},init:function e(){this.sendMessage({t:"finish",d:{h:document.body.scrollHeight}})},listenMsg:function e(t,n){var o=this;if(n==="ready"&&o.token&&typeof t==="function"){t({token:o.option.token,appId:o.option.appId,userInfo:o.option.userInfo,theme:o.option.theme,spId:o.option.spId,businessType:o.option.businessType,color:o.option.color,v:o.option.version})}else if(n==="ready"&&!o.option.token){window.addEventListener("message",function(e){if(!e.data.fi)return;else o.option=Object.assign(o.option,e.data.fi);o.setTheme(o.option.theme,o.option.color,o.option.v);if(typeof t==="function")t(e.data.fi)},false)}else{window.addEventListener("message",function(e){if(!e.data.fi)return;if(typeof t==="function")t(e.data.fi)},false)}},sendMessage:function e(t){if(window.top===window){console.log("请嵌入企业门户中使用改方法："+t.t)}else{window.parent.postMessage({fi:t},"*")}},cookie:{set:function e(t,n,o){var i=new Date;var r=window.location.hostname;var s=r.split(".");var a=s.length<3?r:(s.splice(0,1),s.join("."));i.setTime(i.getTime()+24*60*60*1e3*o);window.document.cookie=t+"="+n+";path=/;domain="+a+";expires="+i.toGMTString()},get:function e(t){var n=window.document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return n?n[2]:null},delete:function e(t){this.set(t,"",-1)}},ready:function e(t){try{if(window.top===window)r().setTheme();else this.listenMsg(t,"ready")}catch(e){o=true;return this}return this},catch:function e(t){if(typeof t==="function"&&o)t()},hashNavigation:function e(t,n){if(!t.name)return;this.sendMessage({t:"hashNavigation",d:{name:t.name,routerUrl:t.routerUrl||""}});this.listenMsg(n,"hashNavigation")},loginOut:function e(){this.sendMessage({t:"loginOut"})},goto:function e(t){console.log(t)},setTheme:function e(t,n,o){var i=t||this.getQueryObject().theme;var r=n||this.getQueryObject().color;if(i)this.option.theme=i;var s=document.createElement("link");s.rel="stylesheet";s.href="/static/theme/"+this.option.theme+"/index.css";var a=document.getElementsByTagName("head")[0];document.head.appendChild(s);if(r&&r!==this.option.origColor){this.setColor(r,this.option.origColor,o)}else{document.body.style.display="block"}},setColor:function e(t,n,o){if(typeof t!=="string")return;var i=this.getThemeCluster(t.replace("#",""));var r=this.getThemeCluster(n.replace("#",""));var s=this;var a=function e(t,n){return function(){var e=s.getThemeCluster(s.option.origColor.replace("#",""));var o=s.updateStyle(s[t],e,i);var r=document.getElementById(n);if(!r){r=document.createElement("style");r.setAttribute("id",n);document.head.appendChild(r)}r.innerText=o}};var c=a("chalk","chalk-style");var u=o||this.getQueryObject().v;if(!this.option.chalk){var l="https://unpkg.com/element-ui@"+u+"/lib/theme-chalk/index.css";this.getCSSString(l,c,"chalk")}else{c()}var f=[].slice.call(document.querySelectorAll("style")).filter(function(e){var t=e.innerText;return new RegExp(n,"i").test(t)&&!/Chalk Variables/.test(t)});f.forEach(function(e){var t=e.innerText;if(typeof t!=="string")return;e.innerText=s.updateStyle(t,r,i)})},updateStyle:function e(t,n,o){var i=t;n.forEach(function(e,t){i=i.replace(new RegExp(e,"ig"),o[t])});return i},getCSSString:function e(t,n,o){var i=new XMLHttpRequest;var r=this;i.onreadystatechange=function(){if(i.readyState===4&&i.status===200){r[o]=i.responseText.replace(/@font-face{[^}]+}/,"");n();document.body.style.display="block"}};i.open("GET",t);i.send()},getThemeCluster:function e(t){var n=function e(t,n){var o=parseInt(t.slice(0,2),16);var i=parseInt(t.slice(2,4),16);var r=parseInt(t.slice(4,6),16);if(n===0){return[o,i,r].join(",")}else{o+=Math.round(n*(255-o));i+=Math.round(n*(255-i));r+=Math.round(n*(255-r));o=o.toString(16);i=i.toString(16);r=r.toString(16);return"#"+o+i+r}};var o=function e(t,n){var o=parseInt(t.slice(0,2),16);var i=parseInt(t.slice(2,4),16);var r=parseInt(t.slice(4,6),16);o=Math.round((1-n)*o);i=Math.round((1-n)*i);r=Math.round((1-n)*r);o=o.toString(16);i=i.toString(16);r=r.toString(16);return"#"+o+i+r};var i=[t];for(var r=0;r<=9;r++){i.push(n(t,Number((r/10).toFixed(2))))}i.push(o(t,.1));return i},getQueryObject:function e(t){t=t==null?window.location.href:t;var n=t.substring(t.lastIndexOf("?")+1);var o={};var i=/([^?&=]+)=([^?&=]*)/g;n.replace(i,function(e,t,n){var i=decodeURIComponent(t);var r=decodeURIComponent(n);r=String(r);o[i]=r;return e});return o},msg:function e(t,n){if(!arguments.length)return;if(arguments.length===1)n=t,t="danger";switch(t){case"success":console.log("%cfrom fg："+n,"color: #67C23A");break;case"warning":console.log("%cWarning from fg："+n,"color: #E6A23C");break;case"danger":console.log("%cError fg："+n,"color: #F56C6C");break;case"info":console.log("%cfrom fg："+n,"color: #909399");break;default:console.log("%cError from fg："+n,"color: #F56C6C");break}}}}e=new e;e.initFunction();window.onload=function(t){e.init()};return e});